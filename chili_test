/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var caparaoh = /* color: #d63000 */ee.Geometry.Point([-41.79064932159616, -20.431208570078876]),
    aspect_vis = {"opacity":1,"bands":["aspect"],"min":1,"max":2,"palette":["0ec7ff","ffbc83"]};
/***** End of imports. If edited, may not auto-convert in the playground. *****/

var DEM = ee.Image("MERIT/DEM/v1_0_3");

var aspect = ee.Terrain.aspect(DEM);

var chili = ee.Image("CSP/ERGo/1_0/Global/ALOS_CHILI");



var aspect_classes = aspect
      .where(aspect.gte(0).and(aspect.lte(90)), 2) // warm
      .where(aspect.gt(90).and(aspect.lte(270)), 1) // cool
      .where(aspect.gt(270).and(aspect.lte(360)), 2); // warm

/*
CHILI values range from 0 to 255, but in the paper they
classified CHILI using 0-1 scale. I convert their thresholds 
to 0-255 linearly.
*/

var chili_classes = chili
      .where(aspect.gt(195.585), 2) // warm
      .where(aspect.lt(114.24), 1) // cool
      .where(aspect.gte(114.24).and(aspect.lte(195.585)), 0); // neutral


Map.setCenter(-60.284, 4.626, 11);

Map.addLayer(aspect, aspect_vis, 'aspect_raw');
Map.addLayer(aspect_classes, {min: 1, max: 2}, 'aspect', false);
Map.addLayer(chili, {}, 'chili_raw', false);
Map.addLayer(chili_classes, {min: 0, max: 2}, 'chili', false);


Map.centerObject(caparaoh, 12)

